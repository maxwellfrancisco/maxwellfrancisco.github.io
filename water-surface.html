<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Maxwell Francisco - Water Body Surface Area over Time with Python</title>

  <style>
    body {
      font-family: Trebuchet MS, sans-serif;
      max-width: 900px;
      margin: 40px auto;
      line-height: 1.6;
    }

    nav a {
      margin-right: 15px;
      text-decoration: none;
      font-weight: bold;
    }

    h1 {
      margin-bottom: 5px;
    }

    a:link,
    a:visited {
      color: #1a1a1a;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
      color: #444;
    }

    .map-embed {
      width: 100%;
      height: 500px;
      border: 1px solid #ddd;
      margin: 20px 0;
    }

    ul {
      margin-top: 5px;
    }

    .tab-container {
      margin: 20px 0;
    }

    .tab-buttons {
      display: flex;
      border-bottom: 2px solid #ddd;
      margin-bottom: 12px;
    }

    .tab-btn {
      padding: 10px 16px;
      border: none;
      background: none;
      font-size: 1rem;
      cursor: pointer;
      border-bottom: 3px solid transparent;
    }

    .tab-btn.active {
      border-bottom-color: #333;
      font-weight: 600;
    }

    .tab-panel {
      display: none;
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
    }

    .tab-panel.active {
      display: block;
      opacity: 1;
    }

    .tab-panel img {
      width: 100%;
      border: 1px solid #ddd;
    }

    /* ===== PRIMARY (LAKE) TABS ===== */
    .tab-container > .tab-buttons {
      margin-top: 30px;
    }
    
    .tab-container > .tab-buttons .tab-btn {
      font-size: 1.15rem;
      font-weight: 700;
      padding: 14px 22px;
      text-transform: none;
      letter-spacing: 0.5px;
    }
    
    .tab-container > .tab-buttons .tab-btn.active {
      border-bottom: 4px solid #000;
    }

    /* ===== SECONDARY (GRAPH / TABLE) TABS ===== */
    .tab-panel .tab-container .tab-buttons {
      border-bottom: 1px solid #ccc;
      margin-top: 10px;
    }
    
    .tab-panel .tab-container .tab-btn {
      font-size: 0.95rem;
      font-weight: 500;
      padding: 6px 12px;
      color: #555;
    }
    
    .tab-panel .tab-container .tab-btn.active {
      border-bottom: 2px solid #555;
      color: #000;
    }
    
    /* ===== CHILD TAB CONTENT CONTAINER ===== */
    .tab-panel .tab-container {
      padding: 15px 20px;
      background: #fafafa;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
    }


  </style>
</head>

<body>

<nav>
  <a href="index.html">Home</a>
  <a href="resume.html" target="_blank">Resume</a>
  <a href="https://www.linkedin.com/in/maxwell-francisco/" target="_blank">LinkedIn</a>  
</nav>

<h1>Water Body Surface Area over Time with Python</h1>
<p><strong>Tools:</strong> ArcPy, Pandas, Raster Algebra.</p>

<h2>Overview</h2>
<p>
This project uses ArcPy to determine the surface area of a water body using the Normalized Water Difference Index (NDWI). The user inputs the
Landsat images, water body study area shapefile, and the name of the water body. The script outputs rasters containing the water pixels for each 
given year which can be used for visualization and a graph using Matplotlib and Pandas to show change in water surface area over time.
</p>

<h2>Workflow/Methodology</h2>
<p><strong>User Inputs</strong></p>
<ul>
<li>Name of water body (for automatic folder creation and graph).</li>
<li>Landsat NIR/Green bands grouped by folder by year from USGS EarthExplorer.</li>
<li>Shapefile containing desired water body study area in order to clip raster.</li>
</ul>

<p><strong>Processing</strong></p>
<ul>
<li>Determines NIR/Green bands from file names.</li>
<li>NDWI calculation with these bands.</li>
<li>Clips output raster to given study area.</li>
<li>Reclassifies study area with values > 0 as 1 (water), else classified No Data.</li>
<li>Calculation of surface area in square meters and acres from reclassified image.</li>
<li>Continues this process, looping through each year (folder).</li>
<li>Uses Pandas to make a table/graph showing change in surface area of water body over time.</li>
</ul>

<h2>Conclusions</h2>
<p><strong>Overall long-time trends in water surface area of water bodies were able to be determined</strong></p>
<ul>
<li>Script allows for the estimatation of surface area for water bodies with lack of historical data and for a longer timeframe by using Landsat imagery.</li>
</ul>

<p><strong>Each tested water body has varying amounts of accuracy compared to TWDB data, and the script consistently underestimates area</strong></p>
<ul>
<li>Edge detection along shorelines and riverine areas were not being classified as water, most likely due to coarseness of Landsat's 30m^2 imagery and to limitations of the NDWI index</li>
<li>Error between official area and from our script was consistent for each water body.</li>
<li>Other services/satellites such as Google Earth Engine and Sentinel may have higher resolution for more accurate counts, but it does not have as extensive of image history</li>
</ul>

<h2>Possible Improvements</h2>
<ul>
<li>Use USGS API for gathering Landsat images automatically.</li>
<li>Numpy arrays to speed up processing.</li>
<li>Calculating volume using contour line data/TINs and the surface raster.</li>
</ul>
  
<br>
<hr>
<br>
  
<!-- ================= OUTER TABS ================= -->
<div class="tab-container">

  <div class="tab-buttons">
    <button class="tab-btn active">Canyon Lake</button>
    <button class="tab-btn">Lake Buchanan</button>
  </div>

  <div class="tab-content">

    <!-- Canyon Lake -->
    <div class="tab-panel active">
      <div class="tab-container">
        <div class="tab-buttons">
          <button class="tab-btn active">Map</button>
          <button class="tab-btn">Graph</button>
          <button class="tab-btn">Table</button>
        </div>

        <div class="tab-content">
          <div class="tab-panel active">
            <iframe
            class="map-embed"
            src="https://www.arcgis.com/apps/mapviewer/index.html?configurableview=true&webmap=4103b20269cc4d7ba2f2ec0baca18dee&theme=light&heading=true&legend=true&share=true&center=-98.27459040226908,29.885642751314283&scale=72223.819286"
            loading="eager"></iframe>
            <p>Graph made with Pandas and Matplotlib</p>
          </div>
          <div class="tab-panel">
            <img src="images/figure_Canyon_Lake.png" alt="Canyon Lake graph">
            <p>Graph made with Pandas and Matplotlib</p>
          </div>
          <div class="tab-panel">
            <img src="images/canyonlake_table.png" alt="Canyon Lake table">
            <p>TWDB surface area data for Canyon Lake only goes back to 2015.</p>
          </div>
        </div>
      </div>

    </div>

    <!-- Lake Buchanan -->
    <div class="tab-panel">
      <div class="tab-container">
        <div class="tab-buttons">
          <button class="tab-btn active">Graph</button>
          <button class="tab-btn">Table</button>
        </div>

        <div class="tab-content">
          <div class="tab-panel active">
            <img src="images/figure_Lake_Buchanan.png" alt="Lake Buchanan graph">
          </div>
          <div class="tab-panel">
            <img src="images/lakebuchanan_table.png" alt="Lake Buchanan table">
          </div>
        </div>
      </div>

    </div>

  </div>
</div>

<br>
<hr>
<br>

<h2>Python Script</h2>
<iframe src="WaterSurfaceAreaPython.html" width="900" height="500" frameborder="0">
  <p>Your browser does not support iframes.</p>
</iframe>

<br>
<hr>
<br>
  
<p>
<a href="index.html">‚Üê Back to Home</a>

</p>

<script>
  document.querySelectorAll('.tab-container').forEach(container => {

    const buttons = Array.from(
      container.querySelector('.tab-buttons').children
    );

    const panels = Array.from(
      container.querySelector('.tab-content').children
    );

    buttons.forEach((btn, index) => {
      btn.addEventListener('click', () => {

        buttons.forEach(b => b.classList.remove('active'));
        panels.forEach(p => p.classList.remove('active'));

        btn.classList.add('active');
        panels[index].classList.add('active');

      });
    });

  });
</script>

</body>
</html>
